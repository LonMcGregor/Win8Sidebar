function testCSS(str){ var node = document.createElement('style'); node.innerHTML = str; document.body.appendChild(node); }   function testInject(){ var bodyTag = document.getElementsByTagName("body")[0]; var sidebar = document.createElement('div'); sidebar.id = 'sidebarContainer'; var htmlContent = '<div id="sidebar"> <div id="majorContainer"> <div id="linkContainer"> <a href="#search"onclick="showSideBody(1)"><div id="l1" class="sLink clearfix" bn="1"> </div></a> <a href="#share"onclick="showSideBody(2)"><div id="l2" class="sLink clearfix"bn="2"> </div></a> <a href="#start" onclick="showSideBody(3)"><div id="l3" class="sLink clearfix"bn="3"> </div></a> <a href="#devices"onclick="showSideBody(4)"><div id="l4" class="sLink clearfix"bn="4"> </div></a> <a href="#settings"onclick="showSideBody(5)"><div id="l5" class="sLink clearfix"bn="5"> </div></a> </div> </div> <div id="sbContainer"> <div id="sb1" class="sideBody" toggle="0"> <div class="sideHead sideHead1">Search</div> <div id="searching"> <input id="searchbox" placeholder="Search..." onkeydown="doSearch(event)"></input> </div> <ul> <p></p> <p>Common searches / tags:</p> <a href="#tag1" ><li id="sb1Link1" class="shareItem shareText">Tag 1</li></a> <a href="#tag2" ><li id="sb1Link2" class="shareItem shareText">Tag 2</li></a> <a href="#tag3" ><li id="sb1Link3" class="shareItem shareText">Tag 3</li></a> </ul> </div> <div id="sb2" class="sideBody" toggle="0"> <div class="sideHead sideHead1">Share</div> <ul id="shareList"> <a href="#" onclick="window.location=`https://twitter.com/intent/tweet?text=`+window.location" class="shareItem"><li id="shareTwitter" class="shareItem shareText">Share on Twitter</li></a> <a href="#" onclick="window.location=`http://www.reddit.com/submit?title=`+window.title+`&url=`+window.location" class="twitter-share-button"><li id="shareReddit" class="shareItem shareText">Share on Reddit</li></a> </ul> </div> <div id="sb3" class="sideBody" toggle="0"> <div class="sideHead sideHead1">Site</div> <ul> <p>This is a paragraph of text describing the website.</p> <p>This is another line of text followed by a blank line.</p> <p></p> <p>These are some useful links:</p> <a href="#ss1" ><li id="sb3Link1" class="shareItem shareText">Sub-Site 1</li></a> <a href="#ss2" ><li id="sb3Link2" class="shareItem shareText">Sub-Site 2</li></a> <a href="#me" ><li id="sb3Link3" class="shareItem shareText">Me on the web</li></a> </ul> <div class="sideHead sideHead3">Sidebar information:</div> <ul><a href="http://github.com/LonMcgregor/Win8Sidebar" ><li id="sb3Link3" class="shareItem shareText">Github</li></a></ul> </div> <div id="sb4" class="sideBody" toggle="0"> <div class="sideHead sideHead1">Devices(?)</div> <ul> <p></p> <p>Website Tools:</p> <a href="#submit" ><li id="sb4Link1" class="shareItem shareText">Submit Something</li></a> <a href="#ask" ><li id="sb4Link2" class="shareItem shareText">Ask Something</li></a> <a href="#follow" ><li id="sb4Link3" class="shareItem shareText">Follow</li></a> <a href="#rss" ><li id="sb4Link4" class="shareItem shareText">RSS Feed</li></a> </ul> </div> <div id="sb5" class="sideBody" toggle="0"> <div class="sideHead sideHead1">Settings</div> <ul> <p></p> <p>Settings:</p> <a href="#cookies" ><li id="sb5Link1" class="shareItem shareText">Toggle Cookies</li></a> </ul> </div> </div> </div> '; sidebar.innerHTML = htmlContent; bodyTag.appendChild(sidebar); }  window.onload=function() { testInject(); setSize(); testCSS(" .clearfix{ display: block; width: 100%; height: 100%; }.clearfix:after{ content: '.'; display: block; clear: both; visibility: hidden; line-height: 0; height: 0; }   #sidebar { z-index: 100; float: right; background: black; }  #majorContainer{ width: 60px; float: right; background-color: none; z-index: 110; overflow: hidden; -webkit-transition:background-color 0.5s ease; transition: background-color 0.5s ease; } #majorContainer:hover{ background-color: black; -webkit-transition:background-color 0.5s ease; transition: background-color 0.5s ease; }  #linkContainer{ padding: 0 5px; position: relative; right: -50px; -webkit-transition:width 0.5s ease; transition: width 0.5s ease; }  #linkContainer:hover { position: relative; right: 0px; -webkit-transition: right 0.5s ease; transition: right 0.5s ease; }  .sLink { width: 50px; height: 65px; display:-ms-flexbox; -ms-flex-pack:center; -ms-flex-align:center; display:-moz-box; -moz-box-pack:center; -moz-box-align:center; display:-webkit-box; -webkit-box-pack:center; -webkit-box-align:center; display:box; box-pack:center; box-align:center; }  .sLink a, .sLink a:hover, .sLink a:visited{ color: white; text-decoration: none; background-size: 100% 100%; background-repeat: norepeat; }  #l1{ background-image:url('https://raw.githubusercontent.com/LonMcGregor/Win8Sidebar/master/Stable/search.png'); } #l2{ background-image:url('https://raw.githubusercontent.com/LonMcGregor/Win8Sidebar/master/Stable/share.png'); } #l3{ background-image:url('https://raw.githubusercontent.com/LonMcGregor/Win8Sidebar/master/Stable/start.png'); } #l4{ background-image:url('https://raw.githubusercontent.com/LonMcGregor/Win8Sidebar/master/Stable/devices.png'); } #l5{ background-image:url('https://raw.githubusercontent.com/LonMcGregor/Win8Sidebar/master/Stable/settings.png'); }  #sbContainer{ /*display: none;*/ display:block; z-index: 85; float: left; height: 100%; width: 300px; background-color: rgba(0,0,0,0); overflow: hidden; }  .sideBody { float: left; height: 100%; width: 260px; background-color: blue; color: white; padding-left: 20px; } #sb1, #sb2, #sb3, #sb4, #sb5 { position: absolute; right: -321px; -webkit-transition: right 0.5s ease; transition: right 0.5s ease; } #sb1.out, #sb2.out, #sb3.out, #sb4.out, #sb5.out { position: absolute; right: 0px; -webkit-transition: right 0.5s ease; transition: right 0.5s ease; }  .sideBody .sideHead, .sideBody .sideHead, .sideBody .sideHead, .sideBody .sideHead, .sideBody .sideHead { font-family: Segoe UI; font-weight: normal; margin: 5px; } .sideHead1{font-size:32px;} .sideHead2{font-size:28px;} .sideHead3{font-size:24px;} .sideHead4{font-size:20px;} .sideHead5{font-size:16px;}   #sb1{z-index:75;} #sb2{z-index:76;} #sb3{z-index:77;} #sb4{z-index:78;} #sb5{z-index:79;}  #sb1 input { border: none; width: 80%; padding: 5px; font-size: 16px; } .shareItem{ margin-top: 9px; width: 100%; }  #sidebar ul { list-style: none; padding: 0; margin: 0; } #sidebar ul li { list-style: none; margin-top: 5px; margin-bottom: 5px; }  #sidebar a .shareItem, #sidebar ul li, #sidebar p { font-family: Segoe UI; font-weight: normal; width: 240px; height: 25px; padding: 5px; font-size: 16px; } #sidebar a, #sidebar a:hover, #sidebar a:visited { text-decoration: none; } #sidebar a .shareItem:hover { background-color: #f33; } a .shareItem, a .shareItem:hover, a .shareItem:visited { color: white; text-decoration: none; }  .shareText { text-decoration: none; }"); window.addEventListener("resize", function(){setSize();}, true); window.addEventListener("scroll", function(){setOffset(window.pageYOffset);}, true); setSize(); showSideBody(3); testCSS(""); };  function pageAlert(str){ var bodyTag = document.getElementsByTagName("body")[0]; var pageAlert = document.createElement('div'); pageAlert.class = 'WorkingAlert'; var htmlContent = str; pageAlert.innerHTML = htmlContent; bodyTag.appendChild(pageAlert); }   function setSize(){ var h = window.innerHeight;  sidebarDims(h); sidebarAligns(h, 0); }  function setOffset(offset){ var h = window.innerHeight; var newheight = h + offset;  sidebarDims(newheight); sideBodyDims(offset); sidebarAligns(h, offset); }  function sideBodyDims(h){  var items = ["sb1", "sb2", "sb3", "sb4", "sb5"]; for (var i = 0; i < 5; i++){ document.getElementById(items[i]).style.position="absolute"; document.getElementById(items[i]).style.top=h+"px"; }  }  function sidebarDims(h){ var items = ["sidebar", "majorContainer", "sbContainer"]; for (var i = 0; i < 3; i++){ document.getElementById(items[i]).style.height=(""+h+"px");  document.getElementById(items[i]).style.position="absolute"; document.getElementById(items[i]).style.right="0px"; document.getElementById(items[i]).style.top="0px"; } }   function sidebarAligns(h, o){ document.getElementById('linkContainer').style.position="relative";  var containerHeight = document.getElementById('linkContainer').clientHeight; if (containerHeight === 0){ containerHeight = 403; }  var loc = ((h/2)-containerHeight/2)+o; document.getElementById('linkContainer').style.top=(""+loc+"px");  }   function showSideBody(i){ var toggle = document.getElementById('sb'+i).toggle;  for(var j = 1; j < 6; j++){ moveElementIn(j); }  if (toggle===0){ moveElementOut(i); } else { moveElementIn(i); } }   function moveElementIn(i){ document.getElementById('sb'+i).className = document.getElementById('sb'+i).className.replace ( /(?:^|\s)out(?!\S)/g , '' ); document.getElementById('sb'+i).toggle = 0; }   function moveElementOut(i){ document.getElementById('sb'+i).toggle = 1; document.getElementById('sb'+i).className += " out"; }   function doSearch(event){ var keyCode =  ('which' in event) ? event.which : event.keyCode; if (keyCode===13){ window.location="http://duckduckgo.com/?q="+document.getElementById('searchbox').value; } }